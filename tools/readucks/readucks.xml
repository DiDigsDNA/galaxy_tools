<tool id="readucks" name="readucks" version="@TOOL_VERSION@+galaxy0">
    <description>Nanopore read de-multiplexer</description>
    <macros>
        <token name="@TOOL_VERSION@">0.0.2</token>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">readucks</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
          mkdir demuxed &&
          readucks
            -t \${GALAXY_SLOTS:-1}
            -i ${input_fastq}
            --threshold '${barcode_identity_threshold}'
            --secondary_threshold '${barcode_secondary_identity_threshold}'
            --bin_barcodes
            --native_barcodes
            -o demuxed
        ]]>
    </command>
    <inputs>
        <param name="input_fastq" type="data" format="fastq,fastqsanger" label="FASTQ Input" help="FASTQ dataset"/>
        <param name="barcode_identity_threshold" type="float" value="90.0" min="75.0" max="100.0" label="Barcode percent identity threshold" />
        <param name="barcode_secondary_identity_threshold" type="float" value="70.0" min="60.0" max="100.0" label="Barcode secondary percent identity threshold" />
    </inputs>
    <outputs>
        <data name="barcode_NB01" format="fastq" from_work_dir="demuxed/NB01.fastq" label="${tool.name} on ${on_string}: Barcode 01"/>
        <data name="barcode_NB02" format="fastq" from_work_dir="demuxed/NB02.fastq" label="${tool.name} on ${on_string}: Barcode 02"/>
        <data name="barcode_NB03" format="fastq" from_work_dir="demuxed/NB03.fastq" label="${tool.name} on ${on_string}: Barcode 03"/>
        <data name="barcode_NB04" format="fastq" from_work_dir="demuxed/NB04.fastq" label="${tool.name} on ${on_string}: Barcode 04"/>
        <data name="barcode_NB05" format="fastq" from_work_dir="demuxed/NB05.fastq" label="${tool.name} on ${on_string}: Barcode 05"/>
        <data name="barcode_NB06" format="fastq" from_work_dir="demuxed/NB06.fastq" label="${tool.name} on ${on_string}: Barcode 06"/>
        <data name="barcode_NB07" format="fastq" from_work_dir="demuxed/NB07.fastq" label="${tool.name} on ${on_string}: Barcode 07"/>
        <data name="barcode_NB08" format="fastq" from_work_dir="demuxed/NB08.fastq" label="${tool.name} on ${on_string}: Barcode 08"/>
        <data name="barcode_NB09" format="fastq" from_work_dir="demuxed/NB09.fastq" label="${tool.name} on ${on_string}: Barcode 09"/>
        <data name="barcode_NB10" format="fastq" from_work_dir="demuxed/NB10.fastq" label="${tool.name} on ${on_string}: Barcode 10"/>
        <data name="unassigned" format="fastq" from_work_dir="demuxed/unassigned.fastq" label="${tool.name} on ${on_string}: Unassigned"/>
    </outputs>
    <tests>
        <test>
            <param name="input_fastq" value="simulated_badreads_1_first100reads.fastq" />
            <output name="unassigned" ftype="fastq" file="demuxed/unassigned.fastq" />
        </test>
    </tests>
    <help>
      <![CDATA[
      ]]>
    </help>
    <citations>
    </citations>
</tool>
