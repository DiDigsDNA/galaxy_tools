<tool id="readucks" name="readucks" version="@TOOL_VERSION@+galaxy0">
    <description>Nanopore read de-multiplexer</description>
    <macros>
        <token name="@TOOL_VERSION@">0.0.2</token>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">readucks</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
          mkdir demuxed &&
          readucks
            -t \${GALAXY_SLOTS:-1}
            -i ${input_fastq}
            --threshold '${barcode_identity_threshold}'
            --bin_barcodes
            --native_barcodes
            -o demuxed
        ]]>
    </command>
    <inputs>
        <param format="fastq,fastqsanger" name="input_fastq" type="data" label="FASTQ Input" help="FASTQ dataset"/>
    <outputs>
        <data name="barcode_NB01" format="fastq" from_work_dir="demuxed/NB01.fastq" label="${tool.name} on ${on_string}: Barcode 01"/>
        <data name="barcode_NB02" format="fastq" from_work_dir="demuxed/NB02.fastq" label="${tool.name} on ${on_string}: Barcode 02"/>
        <data name="barcode_NB03" format="fastq" from_work_dir="demuxed/NB02.fastq" label="${tool.name} on ${on_string}: Barcode 03"/>
        <data name="barcode_NB04" format="fastq" from_work_dir="demuxed/NB02.fastq" label="${tool.name} on ${on_string}: Barcode 04"/>
        <data name="unassigned" format="fastq" from_work_dir="demuxed/unassigned.fastq" label="${tool.name} on ${on_string}: Unassigned"/>
    </outputs>
    <tests>
        <test>
            <param name="input_fastq" value="simulated_badreads_1_first100reads.fastq" />
            <output name="barcode_NB02" ftype="fastq" file="demuxed/NB02.fastq" />
        </test>
    </tests>
    <help>
      <![CDATA[
      ]]>
    </help>
    <citations>
    </citations>
</tool>
