<tool id="medaka_consensus" name="medaka_consensus" version="@VERSION@+galaxy0" profile="19.01">
    <description>Creates a consensus sequence from an alignment generated from nanopore sequence data</description>
    <macros>
        <token name="@VERSION@">0.11.5</token>
    </macros>
    <requirements>
        <requirement type="package" version="@VERSION@">medaka</requirement>
        <requirement type="package" version="1.9">samtools</requirement>
    </requirements>
    <version_command>medaka --version</version_command>
    <command detect_errors="exit_code"><![CDATA[
        ln -s '${input_alignment}' alignment.bam &&
        samtools index alignment.bam &&
        medaka consensus 
          --threads \${GALAXY_SLOTS:-4}
          --model '${model}'
          alignment.bam
          '${consensus_hdf}'
          > '${log}'
    ]]></command>
    <inputs>
        <param name="input_alignment" type="data" format="bam" label="Input Alignment"/>
        <param name="model" type="select" label="Model">
            <option value="r941_min_fast_g303">r941_min_fast_g303</option>
            <option value="r941_min_high_g303" selected="True">r941_min_high_g303</option>
            <option value="r941_min_high_g330">r941_min_high_g330</option>
            <option value="r941_min_high_g344">r941_min_high_g344</option>
            <option value="r941_prom_fast_g303">r941_prom_fast_g303</option>
            <option value="r941_prom_high_g303">r941_prom_high_g303</option>
            <option value="r941_prom_high_g344">r941_prom_high_g344</option>
            <option value="r941_prom_high_g330">r941_prom_high_g330</option>
            <option value="r10_min_high_g303">r10_min_high_g303</option>
            <option value="r10_min_high_g340">r10_min_high_g340</option>
            <option value="r103_min_high_g345">r103_min_high_g345</option>
            <option value="r941_prom_snp_g303">r941_prom_snp_g303</option>
            <option value="r941_prom_variant_g303">r941_prom_variant_g303</option>
            <option value="r941_min_high_g340_rle">r941_min_high_g340_rle</option>
        </param>
    </inputs>
    <outputs>
        <data name="consensus_hdf" format="binary" label="${tool.name} on ${on_string}: consensus hdf" />
        <data name="log" format="txt" label="${tool.name} on ${on_string}: Log" from_work_dir="log.txt"/>
    </outputs>
    <tests>
    </tests>
    <help><![CDATA[
    ]]></help>
</tool>
